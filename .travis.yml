language: node_js
node_js:
- '5'
services:
- docker
env:
  global:
  - DOCKER_IMAGE_NAME=wackoisgod/tg-adventurebot
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: UxrhRcFrtvMXtopYEYkxVCfk0zs/ZXYbLTGnX1S+Q66bt6GgHUeu/iGpMFz0U7PLNLqMFFoAq2g0oRbhLqHD9mHNdkm7g8t2EzojPoVm/RyzrUVsyzqRdS5m3nOCGhPZK+UgCELl+8O06KJSrQ0XAdwkaozUx70CUKJ9dSuJu9WDtiPY4UJJ0hRqtDrs4TUUwNnBknf7nakHjIgLnHVt3LctF3fnmtQF7Z0LtaPI5Lc1WCOdEqhybIqcKsmNSVILQ68SJfdHuLh0bv311LOnwNUY/hcf+tF2gJlJR5MiIWLtt7O/jCTg8WMvT2S+JPh/cvzzvqcM3LWNXUYyYzkrFwRcoalDlQs5spWKXYJha13V3QmUJgxhw1MCMCPTsgS/npztUXV3gj84BMCGTmR0pqXZM/NV/YhXQV2bcAp5dfRpdb+v8ymwDKtpflFV+L7IlwtWrwPbEv4NMrB7Eh6ApV//fSYi8lBqRqA15FJqfQeG4j35rxg+u8Rf54gUDj6ys+ujte4YN7tiMM5F78lg8qr7c0N0fqcOnAyfSINMDghfcI3J+c8nuuvXzfgXEw8j2mztaN2CWxClbv0c/RMgG1Eopvcu/VaDYeeqn4yTp8uxxMIag49KKRw+B/v0tkfzcaWUTWsZTQt1G7Mr2Iy1zlguV4PspMslh+0GciwrXvs=
  - secure: P1h+fd+/poRY4+uAaA2WMYYb19Mu0e2BqW8Zl1p8qfrguQDf5/16YJWuo6ODQ2VFW/JPiMgsZwpKsolUbsD2tMOXPWSghAKfgdM4zIhIvdhykIOIn8zQwPlRKolTLmP2l1bxlPbhcBg1Ho0QiLd2LkhPY41hXAji2+kW7A/F8as3y6jkjLxhIPYUuFM2US0yu0bUEGwc+VlGbSUVMtzRgPdcuUKdZJbN2cw6QhWzSj0NkkkhOzom4/a3SJYfMq8DQQUMvRJYAhy+17QLXOSzWk/AhcS8d+F/aTgqxlXCksnQYV/ruqntVzZC0TFaRbmUm1VJuXWdrQIkGWyaFWpqme80s1DNUcnu5kZDmPTDZbDAWo4nxwRBVvbjYQZeTmckAhluZuo2xJCxx4UC3jgRfU07hOv+tdRgfDtJGd7Qb8UYRjYD2w9gf5kdKP+0pOwlIwDFFybJCbhhrDcTBsmkxhkeesyA3Q1ixjiixLMvxhjw6ST6ijw4jXEyE7WTffEs3ygs5RKhp67h7nAgdN6ouFgZ3W55PWeakfw9A2+waLSN350Vo575fLQbeicmgGeDf48VykS9MFI047hIAdcX1p5b18Fp4DGFRpJ6vSZt3z0zwO53oQ+RclkplxvhJXRHVla17f98LImFQEF4knlZhEOEoEX6BSZo8xKRvVDaQW4=
  - secure: GW2LN2bMQrvjHmG4oQPyQrhHK+q0D79LTmf3hzVBW8XbvTKgq5A8BXiVj3GH5LpTiTLOitmsJKaXwLz7y5bO9PidKN5r0tuTRZqnGRBvdFsZ7Gfjxm1FZ8OC614f0x6aaTZXG00Hf6MiCRh866EDDkHZ1WIr/DIhElFVej6P0H4mSCPscdplt1lakyRewZJBNqwsOlu96phSTIA+vspxn1+S1RR1xbOAnUeCUCeCR9IDEIgL7f7Am9iChNuYlvb5Al9cSZaKc7ycFbath/SV3pvO46l3sK2PKtkTlhmnhP+omFzzMRJ6E4l9gSDeQ9rwagHN50yfz6ImfqwGDK72pERsWeVp9qHZYwJon1CS14Qo5owPTHhHwUXKbZym8aIC60fD9PvGeIdHH7jA0VouvL5qUYj6rh4+4ILbLvv6r0bstV3DhT1tUuO0cCFP8GY72tAlZJqb+vfUS7xM72C3+VqdD+Bzuhgmn9I91E5DZvtw7mZNhOt/TE7WanC9WrrvW7a06Z/XfH3s/GxNqeiovyIJUuYRPAD3KFIdOVsjWa8iRZFOniK8RbwY4kxN782C7kzIlooK1IxHwtv8MGOrg/C7jG/M9AjTGYRPsuZLqHETBkxhhG61UKEbp6iQI0u94XkeiTShJFtus+a/e08eR7VqsvWnT8Mf0j3SqXFPwOo=
after_success: 
  - docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USER" -p="$DOCKER_PASS" 
  - docker build -f Dockerfile -t $DOCKER_IMAGE_NAME . 
  - if [ ! -z "$TRAVIS_TAG" ]; then 
      docker tag $DOCKER_IMAGE_NAME:latest $DOCKER_IMAGE_NAME:$TRAVIS_TAG; 
   fi 
  - if [ "$TRAVIS_BRANCH" == "master" ]; then 
      docker push $DOCKER_IMAGE_NAME; 
   fi